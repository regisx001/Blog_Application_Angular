<!-- Floating chat button -->
<div
  class="fixed bottom-6 right-6 z-50 bg-blue-600 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg cursor-pointer hover:bg-blue-700 transition-all"
  (click)="toggleChat()"
>
  <!-- Comment icon SVG -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 512 512"
    class="w-6 h-6 fill-current"
  >
    <path
      d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"
    />
  </svg>
</div>

<!-- Chat window -->
<div
  class="chatbot-container fixed bottom-24 right-6 w-full max-w-sm bg-white rounded-lg shadow-xl z-40 transform origin-bottom-right transition-all"
  [ngClass]="{
    'scale-100 opacity-100': isChatVisible,
    'scale-0 opacity-0': !isChatVisible
  }"
>
  <!-- Chat header -->
  <div
    class="bg-blue-600 text-white px-4 py-3 rounded-t-lg flex justify-between items-center"
  >
    <div class="flex items-center">
      <div
        class="w-8 h-8 bg-white rounded-full flex items-center justify-center mr-3"
      >
        <!-- Robot icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 512"
          class="w-4 h-4 fill-blue-600"
        >
          <path
            d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
          />
        </svg>
      </div>
      <div>
        <h3 class="font-medium">Assistant</h3>
        <p class="text-xs text-blue-100">Online</p>
      </div>
    </div>
    <div class="flex">
      <button
        (click)="expandToFullscreen()"
        class="text-white hover:text-gray-200 mr-3"
      >
        <!-- Expand icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
          class="w-4 h-4 fill-current"
        >
          <path
            d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64v-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32h-96zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64h-64c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32v-96z"
          />
        </svg>
      </button>
      <button
        (click)="minimizeChat()"
        class="text-white hover:text-gray-200 mr-3"
      >
        <!-- Minus icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
          class="w-4 h-4 fill-current"
        >
          <path
            d="M432 256c0 17.7-14.3 32-32 32H48c-17.7 0-32-14.3-32-32s14.3-32 32-32h352c17.7 0 32 14.3 32 32z"
          />
        </svg>
      </button>
      <button (click)="closeChat()" class="text-white hover:text-gray-200">
        <!-- X/Close icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
          class="w-4 h-4 fill-current"
        >
          <path
            d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256l105.3-105.4z"
          />
        </svg>
      </button>
    </div>
  </div>

  <!-- Chat content -->
  <div #chatContainer class="chat-container px-4 py-3">
    <!-- Messages -->
    <ng-container *ngFor="let message of messageHistory">
      <div
        class="flex mb-4"
        [ngClass]="{ 'justify-end': message.sender === 'user' }"
      >
        <!-- User message -->
        <ng-container *ngIf="message.sender === 'user'">
          <div class="chat-bubble-user py-2 px-3 max-w-xs">
            <p class="text-sm">{{ message.text }}</p>
          </div>
          <div
            class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center ml-2 flex-shrink-0"
          >
            <!-- User icon SVG -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 448 512"
              class="w-4 h-4 fill-gray-500"
            >
              <path
                d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"
              />
            </svg>
          </div>
        </ng-container>

        <!-- Bot message -->
        <ng-container *ngIf="message.sender === 'bot'">
          <div
            class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
          >
            <!-- Robot icon SVG -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 640 512"
              class="w-4 h-4 fill-blue-600"
            >
              <path
                d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
              />
            </svg>
          </div>
          <div class="ml-2 chat-bubble-bot py-2 px-3 max-w-xs">
            <p class="text-sm">{{ message.text }}</p>
          </div>
        </ng-container>
      </div>
    </ng-container>

    <!-- Typing indicator -->
    <div *ngIf="isTyping" class="flex mb-4">
      <div
        class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
      >
        <!-- Robot icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 512"
          class="w-4 h-4 fill-blue-600"
        >
          <path
            d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
          />
        </svg>
      </div>
      <div class="ml-2 chat-bubble-bot py-3 px-4 max-w-xs">
        <div class="typing-indicator">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Input area -->
  <div class="border-t px-4 py-3">
    <form (ngSubmit)="sendMessage()" class="flex items-center">
      <input
        #messageInput
        type="text"
        [(ngModel)]="userMessage"
        name="userMessage"
        placeholder="Type your message..."
        class="flex-1 border border-gray-300 rounded-l-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
      />
      <button
        type="submit"
        class="bg-blue-600 text-white rounded-r-full p-2 px-4 hover:bg-blue-700 focus:outline-none"
      >
        <!-- Paper plane icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          class="w-4 h-4 fill-current"
        >
          <path
            d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"
          />
        </svg>
      </button>
    </form>

    <!-- Suggested queries -->
    <div class="mt-3 flex flex-wrap gap-2">
      <button
        *ngFor="let query of suggestionQueries"
        (click)="selectSuggestion(query)"
        class="text-xs bg-gray-200 hover:bg-gray-300 text-gray-700 py-1 px-3 rounded-full transition-colors"
      >
        {{ query }}
      </button>
    </div>
  </div>
</div>

<!-- Fullscreen chat interface -->
<div *ngIf="isFullscreenMode" class="fixed inset-0 bg-white z-50 flex flex-col">
  <!-- Fullscreen header -->
  <div
    class="bg-blue-600 text-white px-6 py-4 flex justify-between items-center shadow-md"
  >
    <div class="flex items-center">
      <div
        class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3"
      >
        <!-- Robot icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 512"
          class="w-5 h-5 fill-blue-600"
        >
          <path
            d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
          />
        </svg>
      </div>
      <div>
        <h2 class="font-medium text-xl">AI Assistant</h2>
        <p class="text-sm text-blue-100">Here to help with anything you need</p>
      </div>
    </div>
    <div class="flex items-center">
      <button
        (click)="startNewChat()"
        class="bg-blue-700 hover:bg-blue-800 text-white rounded-lg py-2 px-4 mr-4 flex items-center"
      >
        <!-- Plus icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
          class="w-4 h-4 fill-current mr-2"
        >
          <path
            d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"
          />
        </svg>
        <span>New Chat</span>
      </button>
      <button
        (click)="closeFullscreen()"
        class="text-white hover:text-gray-200 text-2xl"
      >
        <!-- X/Close icon SVG -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
          class="w-6 h-6 fill-current"
        >
          <path
            d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256l105.3-105.4z"
          />
        </svg>
      </button>
    </div>
  </div>

  <!-- Fullscreen layout -->
  <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar -->
    <div class="w-64 bg-gray-100 border-r border-gray-200 flex flex-col">
      <div class="p-4">
        <h3 class="font-medium text-gray-700 mb-2">Recent Conversations</h3>
        <div class="space-y-2">
          <div
            *ngFor="let chat of chatHistories"
            [ngClass]="{
              'bg-blue-100': chat.isActive,
              'hover:bg-gray-200': !chat.isActive
            }"
            class="p-3 rounded-lg cursor-pointer"
          >
            <p
              [ngClass]="{
                'text-blue-800': chat.isActive,
                'text-gray-800': !chat.isActive
              }"
              class="font-medium text-sm"
            >
              {{ chat.title }}
            </p>
            <p class="text-xs text-gray-600 truncate">{{ chat.timestamp }}</p>
          </div>
        </div>
      </div>
      <div class="mt-auto p-4 border-t border-gray-200">
        <div
          class="flex items-center justify-between text-gray-700 cursor-pointer hover:text-blue-600"
        >
          <div class="flex items-center">
            <!-- Settings/Gear icon SVG -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              class="w-4 h-4 fill-current mr-2"
            >
              <path
                d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"
              />
            </svg>
            <span>Settings</span>
          </div>
          <div>
            <!-- Chevron right icon SVG -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 320 512"
              class="w-3 h-3 fill-current"
            >
              <path
                d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"
              />
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Main chat area -->
    <div class="flex-1 flex flex-col">
      <!-- Messages container -->
      <div #fullscreenMessages class="flex-1 overflow-y-auto p-6">
        <!-- Welcome message -->
        <div class="max-w-3xl mx-auto" *ngIf="messageHistory.length === 1">
          <div class="flex items-start mb-6">
            <div
              class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
            >
              <!-- Robot icon SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 640 512"
                class="w-4 h-4 fill-blue-600"
              >
                <path
                  d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
                />
              </svg>
            </div>
            <div class="ml-4 chat-bubble-bot py-3 px-4 rounded-lg max-w-prose">
              <p>
                Hello! I'm your AI assistant, ready to help with your questions
                and tasks. You can ask me anything, and I'll do my best to
                assist you.
              </p>
              <p class="mt-2">Here are some things I can help you with:</p>
              <ul class="list-disc ml-6 mt-2">
                <li>Answer questions about products and services</li>
                <li>Provide information about shipping and returns</li>
                <li>Troubleshoot common issues</li>
                <li>Offer recommendations based on your preferences</li>
              </ul>
              <p class="mt-2">What can I help you with today?</p>
            </div>
          </div>
        </div>

        <!-- Messages -->
        <ng-container *ngFor="let message of messageHistory; let i = index">
          <div
            *ngIf="i > 0 || messageHistory.length === 1"
            class="max-w-3xl mx-auto"
          >
            <div
              class="flex items-start mb-6"
              [ngClass]="{ 'flex-row-reverse': message.sender === 'user' }"
            >
              <!-- User message -->
              <ng-container *ngIf="message.sender === 'user'">
                <div
                  class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0"
                >
                  <!-- User icon SVG -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 448 512"
                    class="w-4 h-4 fill-gray-600"
                  >
                    <path
                      d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"
                    />
                  </svg>
                </div>
                <div class="mr-4 bg-gray-100 py-3 px-4 rounded-lg max-w-prose">
                  <p [innerHTML]="formatMessageText(message.text)"></p>
                </div>
              </ng-container>

              <!-- Bot message -->
              <ng-container *ngIf="message.sender === 'bot'">
                <div
                  class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
                >
                  <!-- Robot icon SVG -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 640 512"
                    class="w-4 h-4 fill-blue-600"
                  >
                    <path
                      d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
                    />
                  </svg>
                </div>
                <div
                  class="ml-4 chat-bubble-bot py-3 px-4 rounded-lg max-w-prose"
                >
                  <p [innerHTML]="formatMessageText(message.text)"></p>
                </div>
              </ng-container>
            </div>
          </div>
        </ng-container>

        <!-- Fullscreen typing indicator -->
        <div *ngIf="isFullscreenTyping" class="max-w-3xl mx-auto">
          <div class="flex items-start">
            <div
              class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
            >
              <!-- Robot icon SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 640 512"
                class="w-4 h-4 fill-blue-600"
              >
                <path
                  d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM192 352c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zm96 0c0 8.8-7.2 16-16 16s-16-7.2-16-16V224c0-8.8 7.2-16 16-16s16 7.2 16 16v128zM304 128H160c-8.8 0-16 7.2-16 16v48H352v-48c0-8.8-7.2-16-16-16h-32z"
                />
              </svg>
            </div>
            <div class="ml-4 chat-bubble-bot py-3 px-4 rounded-lg">
              <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Input area -->
      <div class="border-t border-gray-200 p-4 bg-white">
        <div class="max-w-3xl mx-auto">
          <form (ngSubmit)="sendMessage(true)" class="flex items-center">
            <div class="relative flex-1">
              <textarea
                #fullscreenInput
                [(ngModel)]="fullscreenUserMessage"
                name="fullscreenUserMessage"
                rows="1"
                placeholder="Message your assistant..."
                class="w-full border border-gray-300 rounded-lg py-3 px-4 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                (input)="adjustTextareaHeight(fullscreenInput)"
                (keydown)="handleKeydown($event)"
              ></textarea>
              <button
                type="submit"
                class="absolute right-2 bottom-2 bg-blue-600 text-white rounded-full p-2 hover:bg-blue-700 focus:outline-none"
              >
                <!-- Paper plane icon SVG -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  class="w-4 h-4 fill-current"
                >
                  <path
                    d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"
                  />
                </svg>
              </button>
            </div>
          </form>
          <div
            class="text-xs text-gray-500 mt-2 flex justify-between items-center"
          >
            <span>Press Enter to send, Shift+Enter for new line</span>
            <span>Powered by Your Company Name</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
